name: "[DEPRECATED] Backend: Build & Deploy (AKS)"

# DEPRECATED: This workflow deployed to AKS via ArgoCD GitOps.
# We've migrated back to Container Apps - see backend-dev.yml instead.
# Keeping this file for reference but disabling triggers.

on:
  workflow_dispatch:
    inputs:
      confirm:
        description: 'Type DEPLOY to confirm (this deploys to legacy AKS)'
        required: true

permissions:
  id-token: write
  contents: write

jobs:
  build-and-push:
    if: ${{ github.event.inputs.confirm == 'DEPLOY' }}
    runs-on: ubuntu-latest

    env:
      NODE_VERSION: 20.x
      ACR_NAME: armportalacre4k9
      IMAGE_NAME: armportal-backend

    steps:
      - name: Deprecated Notice
        run: |
          echo "WARNING: This workflow is deprecated!"
          echo "The backend has been migrated to Azure Container Apps."
          echo "Please use the 'Backend: Build & Deploy (Container Apps)' workflow instead."
          echo ""
          echo "This workflow will not deploy to AKS."
          exit 1
