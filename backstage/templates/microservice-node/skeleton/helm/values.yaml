replicaCount: ${{ values.min_replicas }}

image:
  repository: ghcr.io/${{ values.service_name }}
  pullPolicy: IfNotPresent
  tag: "latest"

service:
  type: ClusterIP
  port: ${{ values.port }}

ingress:
  enabled: ${{ values.ingress_enabled }}
  className: "nginx"
  annotations: {}
  hosts:
    - host: ${{ values.service_name }}.chrishouse.io
      paths:
        - path: /
          pathType: Prefix

resources:
  requests:
    cpu: ${{ values.cpu_request }}
    memory: ${{ values.memory_request }}
  limits:
    cpu: "500m"
    memory: "512Mi"

autoscaling:
  enabled: true
  minReplicas: ${{ values.min_replicas }}
  maxReplicas: ${{ values.max_replicas }}
  targetCPUUtilizationPercentage: 80

livenessProbe:
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 10
  periodSeconds: 10

readinessProbe:
  httpGet:
    path: /ready
    port: http
  initialDelaySeconds: 5
  periodSeconds: 5

env: []

# Azure Key Vault secrets integration via CSI driver
# Set enabled: true and configure your Key Vault details
secrets:
  enabled: false
  keyVaultName: "akvnotintf1"  # Your Key Vault name
  tenantId: "354b7ce2-bca3-4af5-b19a-e05a09b68a7b"  # Azure tenant ID
  managedIdentityId: "3e50729e-4a1f-42ab-aebb-9f80758b8c8d"  # AKS kubelet identity
  # Map Key Vault secrets to environment variables
  items: []
    # - keyVaultName: DATABASE-URL        # Secret name in Key Vault (use hyphens)
    #   envVar: DATABASE_URL              # Environment variable name (use underscores)
    # - keyVaultName: REDIS-URL
    #   envVar: REDIS_URL
