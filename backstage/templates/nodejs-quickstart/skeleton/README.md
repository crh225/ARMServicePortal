# ${{ values.serviceName }}

${{ values.description }}

**Team:** ${{ values.team }}
**Namespace:** ${{ values.namespace }}
**Cluster:** shared-dev-cluster

## Quick Start

This service was created using the Golden Path template and is configured for immediate deployment to the shared development cluster.

### Local Development

```bash
# Install dependencies
npm install

# Run in development mode
npm run dev

# Run tests
npm test

# Lint code
npm run lint
```

### Architecture

- **Framework:** Express.js
- **Runtime:** Node.js 20
- **Container:** Docker multi-stage build
- **Deployment:** Kubernetes via Helm + ArgoCD
- **Monitoring:** Prometheus metrics at `/metrics`

### Endpoints

- `GET /` - Service information
- `GET /health` - Health check (liveness probe)
- `GET /ready` - Readiness check
- `GET /metrics` - Prometheus metrics
- `GET /api/hello` - Example API endpoint

### CI/CD Pipeline

Every push to `main` triggers:
1. Linting and tests
2. Docker image build
3. Push to GitHub Container Registry
4. ArgoCD automatic deployment

### Resource Limits

- **CPU Request:** 100m
- **CPU Limit:** 500m
- **Memory Request:** 128Mi
- **Memory Limit:** 512Mi

### Namespace Isolation

This service runs in the `${{ values.namespace }}` namespace with:
- **Resource Quota:** 2 CPU / 4GB RAM (team-wide)
- **Network Policy:** Default-deny ingress (must explicitly allow traffic)
- **Limit Ranges:** Automatic resource limits for all pods

### Monitoring

Prometheus ServiceMonitor is automatically configured to scrape `/metrics` every 30 seconds.

### Adding Dependencies

```bash
npm install <package-name>
```

Commit the updated `package.json` and `package-lock.json`.

### Deployment

Deployments are fully automated via GitOps:

1. Push code to `main` branch
2. GitHub Actions builds and pushes Docker image
3. ArgoCD detects new image and syncs deployment
4. Health checks verify deployment success

**Note:** To manually sync, use the ArgoCD UI or CLI.

### Preview Environments

Every Pull Request automatically deploys a preview environment:

1. **Open a PR** - Preview environment automatically created
2. **Preview URL** - Posted as PR comment: `https://${{ values.serviceName }}-pr-{number}.${{ values.team }}.devspoke.chrishouse.io`
3. **Automatic Updates** - Every commit updates the preview
4. **Auto-Cleanup** - Preview deleted when PR is closed/merged

**Preview environment features:**
- Isolated namespace per PR
- Automatic TLS certificates
- Resource quotas (smaller than production)
- Ephemeral - no persistent data

**Required Secret:** The preview workflow requires a `GITOPS_TOKEN` secret:
1. Go to: Settings â†’ Secrets â†’ Actions
2. Create secret: `GITOPS_TOKEN`
3. Value: GitHub PAT with `repo` scope for ARMServicePortal repository

---

ðŸ¥š **Generated by Golden Path Template**
