# GitOps Manifests for ${{ values.serviceName }} (Production)

These manifests are automatically submitted as a pull request to the ARMServicePortal repository.

## Production Environment

### namespace-claim-prod.yaml
Creates an isolated namespace for the `${{ values.team }}` team on the production cluster.

**What it creates:**
- Namespace: `${{ values.prodNamespace }}`
- ResourceQuota: Production limits (4 CPU, 8GB RAM)
- LimitRange: Default resource limits for pods
- NetworkPolicy: Default-deny ingress (security isolation)

### argocd-application-prod.yaml
Configures ArgoCD to deploy to production with semantic versioning.

**What it does:**
- Uses ArgoCD Image Updater for version detection
- Only deploys semver-tagged images (v1.0.0, v1.1.0, etc.)
- Enables horizontal pod autoscaling
- Deploys to `${{ values.prodCluster }}`

## Ingress Configuration

The PR also includes VirtualService configurations for Istio:
- **Hub VirtualService**: Routes external traffic to the spoke cluster
- **Spoke VirtualService**: Routes traffic to the actual service

Production URL: `https://${{ values.serviceName }}-prod.chrishouse.io`

## Deployment Flow

1. Create GitHub Release (e.g., v1.0.0)
2. CI builds versioned image
3. ArgoCD Image Updater detects new version
4. ArgoCD syncs to aks-app-spoke

**Estimated Time:** 2-3 minutes after release

---

Generated by Golden Path Template
