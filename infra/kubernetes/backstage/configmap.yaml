# ConfigMap for Backstage environment variables
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: backstage-config
  namespace: backstage
  labels:
    app: backstage
data:
  # Node.js settings
  NODE_ENV: "production"
  NODE_OPTIONS: "--no-node-snapshot"

  # PostgreSQL connection (Terraform provisioned)
  POSTGRES_HOST: "backstage-dev-psql-f9rg.postgres.database.azure.com"
  POSTGRES_PORT: "5432"
  POSTGRES_USER: "admin_f9rg"
  POSTGRES_DB: "backstagedb"

  # Kubernetes clusters for Backstage Kubernetes plugin
  K8S_MGMT_CLUSTER_URL: "https://aks-mgmt-hub-0pvmz07v.hcp.eastus.azmk8s.io:443"
  K8S_APP_CLUSTER_URL: "https://aks-app-spoke-mw4q4-svbm04f8.hcp.eastus.azmk8s.io:443"
